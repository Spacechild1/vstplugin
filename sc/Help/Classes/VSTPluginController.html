<!doctype html><html lang='en'><head><title>VSTPluginController | SuperCollider 3.10.0 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'VSTPluginController';
var scdoc_sc_version = '3.10.0';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>VSTPluginController:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#Introduction'>Introduction</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Parameter%20Automation'>Parameter Automation</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Preset%20Management'>Preset Management</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#GUI'>GUI</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Sequencing'>Sequencing</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Realtime%20Safety'>Realtime Safety</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-open'>open</a> </li>
<li class='toc3'><a href='#-openMsg'>openMsg</a> </li>
<li class='toc3'><a href='#-close'>close</a> </li>
<li class='toc3'><a href='#-closeMsg'>closeMsg</a> </li>
<li class='toc3'><a href='#-browse'>browse</a> </li>
<li class='toc3'><a href='#-editor'>editor</a> </li>
<li class='toc3'><a href='#-editorMsg'>editorMsg</a> </li>
<li class='toc3'><a href='#-gui'>gui</a> </li>
<li class='toc3'><a href='#-info'>info</a> </li>
<li class='toc3'><a href='#-loaded'>loaded</a> </li>
<li class='toc3'><a href='#-reset'>reset</a> </li>
<li class='toc3'><a href='#-resetMsg'>resetMsg</a> </li>
<li class='toc3'><a href='#-synth'>synth</a> </li>
<li class='toc3'><a href='#-synthIndex'>synthIndex</a> </li>
<li class='toc3'><a href='#-wait'>wait</a> </li>
<li class='toc2'><a href='#Parameters'>Parameters</a></li>
<ul class='toc'><li class='toc3'><a href='#-numParameters'>numParameters</a> </li>
<li class='toc3'><a href='#-set'>set</a> </li>
<li class='toc3'><a href='#-setMsg'>setMsg</a> </li>
<li class='toc3'><a href='#-setn'>setn</a> </li>
<li class='toc3'><a href='#-setnMsg'>setnMsg</a> </li>
<li class='toc3'><a href='#-map'>map</a> </li>
<li class='toc3'><a href='#-mapMsg'>mapMsg</a> </li>
<li class='toc3'><a href='#-mapn'>mapn</a> </li>
<li class='toc3'><a href='#-mapnMsg'>mapnMsg</a> </li>
<li class='toc3'><a href='#-mapan'>mapan</a> </li>
<li class='toc3'><a href='#-mapanMsg'>mapanMsg</a> </li>
<li class='toc3'><a href='#-unmap'>unmap</a> </li>
<li class='toc3'><a href='#-unmapMsg'>unmapMsg</a> </li>
<li class='toc3'><a href='#-get'>get</a> </li>
<li class='toc3'><a href='#-getn'>getn</a> </li>
<li class='toc3'><a href='#-parameterAutomated'>parameterAutomated</a> </li>
</ul><li class='toc2'><a href='#Preset%20Management'>Preset Management</a></li>
<ul class='toc'><li class='toc3'><a href='#-numPrograms'>numPrograms</a> </li>
<li class='toc3'><a href='#-program'>program</a> </li>
<li class='toc3'><a href='#-programMsg'>programMsg</a> </li>
<li class='toc3'><a href='#-programName'>programName</a> </li>
<li class='toc3'><a href='#-programNameMsg'>programNameMsg</a> </li>
<li class='toc3'><a href='#-readProgram'>readProgram</a> </li>
<li class='toc3'><a href='#-readBank'>readBank</a> </li>
<li class='toc3'><a href='#-writeProgram'>writeProgram</a> </li>
<li class='toc3'><a href='#-writeBank'>writeBank</a> </li>
<li class='toc3'><a href='#-readProgramMsg'>readProgramMsg</a> </li>
<li class='toc3'><a href='#-readBankMsg'>readBankMsg</a> </li>
<li class='toc3'><a href='#-writeProgramMsg'>writeProgramMsg</a> </li>
<li class='toc3'><a href='#-writeBankMsg'>writeBankMsg</a> </li>
<li class='toc3'><a href='#-setProgramData'>setProgramData</a> </li>
<li class='toc3'><a href='#-setBankData'>setBankData</a> </li>
<li class='toc3'><a href='#-getProgramData'>getProgramData</a> </li>
<li class='toc3'><a href='#-getBankData'>getBankData</a> </li>
<li class='toc3'><a href='#-sendProgramData'>sendProgramData</a> </li>
<li class='toc3'><a href='#-sendBankData'>sendBankData</a> </li>
<li class='toc3'><a href='#-receiveProgramData'>receiveProgramData</a> </li>
<li class='toc3'><a href='#-receiveBankData'>receiveBankData</a> </li>
<li class='toc3'><a href='#-loadPreset'>loadPreset</a> </li>
<li class='toc3'><a href='#-savePreset'>savePreset</a> </li>
<li class='toc3'><a href='#-deletePreset'>deletePreset</a> </li>
<li class='toc3'><a href='#-renamePreset'>renamePreset</a> </li>
</ul><li class='toc2'><a href='#MIDI'>MIDI</a></li>
<ul class='toc'><li class='toc3'><a href='#-midi'>midi</a> </li>
<li class='toc3'><a href='#-sendMidi'>sendMidi</a> </li>
<li class='toc3'><a href='#-sendMidiMsg'>sendMidiMsg</a> </li>
<li class='toc3'><a href='#-sendSysex'>sendSysex</a> </li>
<li class='toc3'><a href='#-sendSysexMsg'>sendSysexMsg</a> </li>
<li class='toc3'><a href='#-midiReceived'>midiReceived</a> </li>
<li class='toc3'><a href='#-sysexReceived'>sysexReceived</a> </li>
</ul><li class='toc2'><a href='#Transport'>Transport</a></li>
<ul class='toc'><li class='toc3'><a href='#-setPlaying'>setPlaying</a> </li>
<li class='toc3'><a href='#-setPlayingMsg'>setPlayingMsg</a> </li>
<li class='toc3'><a href='#-setTempo'>setTempo</a> </li>
<li class='toc3'><a href='#-setTempoMsg'>setTempoMsg</a> </li>
<li class='toc3'><a href='#-setTimeSignature'>setTimeSignature</a> </li>
<li class='toc3'><a href='#-setTimeSignatureMsg'>setTimeSignatureMsg</a> </li>
<li class='toc3'><a href='#-setTransportPos'>setTransportPos</a> </li>
<li class='toc3'><a href='#-setTransportPosMsg'>setTransportPosMsg</a> </li>
<li class='toc3'><a href='#-getTransportPos'>getTransportPos</a> </li>
</ul><li class='toc2'><a href='#VST2%20only'>VST2 only</a></li>
<ul class='toc'><li class='toc3'><a href='#-canDo'>canDo</a> </li>
<li class='toc3'><a href='#-vendorMethod'>vendorMethod</a> </li>
<li class='toc3'><a href='#-vendorMethodMsg'>vendorMethodMsg</a> </li>
</ul><li class='toc2'><a href='#Extensions'>Extensions</a></li>
<ul class='toc'><li class='toc3'><a href='#-iemPluginOSC'>iemPluginOSC</a> </li>
<li class='toc3'><a href='#-iemPluginOSCMsg'>iemPluginOSCMsg</a> </li>
</ul><li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented%20instance%20methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-addDependant'>addDependant</a> </li>
<li class='toc3'><a href='#-makeMsg'>makeMsg</a> </li>
<li class='toc3'><a href='#-programNames'>programNames</a> </li>
<li class='toc3'><a href='#-sendMsg'>sendMsg</a> </li>
<li class='toc3'><a href='#-update'>update</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'><li class='toc2'><a href='#Serial%20FX%20chains'>Serial FX chains</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Master%20FX%20section'>Master FX section</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Automation'>Automation</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#VST%20Instruments'>VST Instruments</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Non-Realtime%20Synthesis'>Non-Realtime Synthesis</a></li>
<ul class='toc'></ul></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./..\Browse.html#Server'>Server</a>&#8201;&gt;&#8201;<a href='./..\Browse.html#Server>Abstractions'>Abstractions</a></span>
</div><h1>VSTPluginController<span id='superclasses'> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>Client-side representation of a VSTPlugin UGen instance</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///C:/Users/Christof/AppData/Local/SuperCollider/Extensions/VSTPlugin/classes/VSTPluginController.sc' title='C:\Users\Christof\AppData\Local\SuperCollider\Extensions\VSTPlugin\classes\VSTPluginController.sc'>VSTPluginController.sc</a></div><div id='related'>See also: <a href="./..\Classes/VSTPlugin.html">VSTPlugin</a>, <a href="./..\Classes/VSTPluginDesc.html">VSTPluginDesc</a>, <a href="./..\Classes/VSTPluginGui.html">VSTPluginGui</a>, <a href="./..\Classes/VSTPluginMIDIProxy.html">VSTPluginMIDIProxy</a>, <a href="./..\Guides/HOA_IEM.html">High order ambisonics using IEM Plugins</a>, <a href="./..\Reference/VSTPlugin-UGen-Documentation.html">VSTPlugin - UGen documentation</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>This class is used to control a specific <a href="./..\Classes/VSTPlugin.html">VSTPlugin</a> instance in a <a href="./..\Classes/Synth.html">Synth</a>, so you can open plugins, automate parameters, change programs, send MIDI messages, etc. Have a look at the examples at the bottom!<h3><a class='anchor' name='Introduction'>Introduction</a></h3>

<p>Here's a quick example showing a simple insert effect on a 2-channel audio bus:<textarea class='editor'>(
SynthDef(\insert, { arg bus;
    ReplaceOut.ar(bus, VSTPlugin.ar(In.ar(bus, 2), 2));
}).add;
)

// search of available VST plugins in the default VST search paths
VSTPlugin.search;

// create the synth:
~synth = Synth(\insert, [\bus, 0]);
// get a handle to the VSTPlugin:
~fx = VSTPluginController(~synth);
// open a plugin by name/key (might require VSTPlugin.search!)
~fx.open("myplugin", verbose: true);
// alternatively, you can open a plugin by its file path
// (this only works if the file contains a single plugin, like most VST2.x plugins)
~fx.open("/path/to/plugin", verbose: true);

// you can do all of the above in a single line:
~fx = VSTPluginController(Synth(\insert, [\bus, 0])).open("myplugin");

// open the plugin browser:
~fx.browse;

// show the generic plugin GUI:
~fx.gui;
// etc.</textarea>

<p>If you have more than one instance of VSTPlugin in your SynthDef, you need to give them unique IDs so that VSTPluginController can find the right instance:<textarea class='editor'>(
// two VST plugins in series:
SynthDef(\insert2, { arg bus;
    var sig;
    sig = In.ar(bus, 2);
    sig = VSTPlugin.ar(sig, 2, id: \eq);
    sig = VSTPlugin.ar(sig, 2, id: \chorus);
    ReplaceOut.ar(bus, sig);
}).add;
)
// create the synth:
~synth = Synth(\insert2, [\bus, 0]);
(
// get handles to the VSTPlugins:
~eq = VSTPluginController(~synth, \eq).open("myEQ");
~chorus = VSTPluginController(~synth, \chorus).open("myChorus");
)
// etc.</textarea>
<h3><a class='anchor' name='Parameter%20Automation'>Parameter Automation</a></h3>

<p>There are three different ways to automate plugin parameters (listed with increasing precedence):<ul>
<li>with the <a href="#-set">-set</a> and <a href="#-setn">-setn</a> methods<textarea class='editor'>// set parameter 1 to 0.5
~fx.set(1, 0.5);</textarea>

<p><li>with the <code>params</code> argument of <a href="./..\Classes/VSTPlugin.html#*ar">VSTPlugin: *ar</a><textarea class='editor'>(
SynthDef(\insert, { arg bus, f;
    var lfo = LFSaw.kr(0.1);
    // set parameter 0 with Synth argument 'f'
    // and modulate parameter 1 with LFO
    var sig = VSTPlugin.ar(In.ar(bus, 2), 2, params: [0, f, 1, lfo]);
    ReplaceOut.ar(bus, sig);
}).add;
)
// create a VSTPlugin instance with parameter 0 set to 0.5
~fx = VSTPluginController(Synth(\insert, [\bus, 0, \f, 0.5])).open("someFX");
// now set it to 0.7
~fx.synth.set(\f, 0.7);</textarea>

<p><li>map them to control or audio busses with <a href="#-map">-map</a><textarea class='editor'>// map parameter 2 to a control bus
~c = Bus.control;
~fx.map(2, ~c);
~c.set(0.5);</textarea>
</ul>

<p>Use <a href="#-get">-get</a> and <a href="#-getn">-getn</a> to obtain current parameter values:<textarea class='editor'>// get the current value of parameter 3 and post it to the console:
~fx.get(3, {arg f; f.postln;});</textarea>

<p><a href="#-set">-set</a>, <a href="#-map">-map</a> and <a href="#-get">-get</a> also accept parameter names instead of indices:<textarea class='editor'>// with the GChorus (GVST) plugin:
~fx.set(\Depth, 0.5);
~fx.get(\Depth, {arg f; f.postln;});</textarea>
<h3><a class='anchor' name='Preset%20Management'>Preset Management</a></h3>

<p>Change built-in FX programs with <a href="#-program">-program</a>:<textarea class='editor'>// list available programs:
~fx.info.printPrograms;
// get current program number
~fx.program;
// switch to program 4:
~fx.program_(4);</textarea>

<p>The easiest way to manage user presets are the <a href="#-savePreset">-savePreset</a> and <a href="#-loadPreset">-loadPreset</a> methods. Because they use standardized preset folder locations, presets can be simply referred to by name:<textarea class='editor'>// list available presets
~fx.info.printPresets;

// save (new) preset
~fx.savePreset("my_preset");
// do something
~fx.gui;
// save again
~fx.savePreset;
// do something
~fx.gui;
// load preset
~fx.loadPreset("my_preset");</textarea>

<p>Internally, preset files use the standard <code>.fxp/.fxp</code> (VST2) or <code>.vstpreset</code> (VST3) format, recognized by most DAWs and VST hosts. You can save presets to your own folders with the following methods:<textarea class='editor'>// write current plugin state to a preset file.
~fx.writeProgram("mypresetfolder/test.fxp");

// ... mess around with the plugin ...
~fx.gui;

// restore previous state:
~fx.readProgram("mypresetfolder/text.fxp");</textarea>

<p>It's also possible to get/set the raw plugin state as an <a href="./..\Classes/Int8Array.html">Int8Array</a>:<textarea class='editor'>// get plugin state as Int8Array:
~fx.getProgramData({ arg data; d = data;});

// do something
~fx.gui;

// restore previous state:
~fx.setProgramData(d);</textarea>

<p>The data has the same binary format as the preset files. You can use these methods to build your own preset management!<div class='note'><span class='notelabel'>NOTE:</span> Many plugins have additional state beyond their parameter values, so you <em>have</em> to use the program and bank methods above to fully save/restore them.</div><h3><a class='anchor' name='GUI'>GUI</a></h3>

<p>Generally, there are two kind of GUIs:<ul>
<li>the native VST editor, which must be explicitly requested when opening a plugin:<textarea class='editor'>// load a plugin
~fx.open("/path/to/plugin", editor: true);
// open the VST editor window
~fx.editor;</textarea>

<p>This will run a native window on the Server (in a seperate thread).<div class='note'><span class='notelabel'>NOTE:</span> On macOS this only works in SuperCollider 3.11 or above!</div><li>a generic Qt GUI which can be opened in a new Window or embedded into existing views:<textarea class='editor'>// load a plugin
~fx.open("/path/to/plugin");
// create a Window with the plugin GUI
~fx.gui;</textarea>

<p>You can change parameters by moving the sliders or entering values into the text fields (don't supported by all plugins). Additionally, you can browse for plugins, select programs and read/write preset files. See <a href="#-gui">-gui</a> and <a href="./..\Classes/VSTPluginGui.html">VSTPluginGui</a> for more information.</ul>
<h3><a class='anchor' name='Sequencing'>Sequencing</a></h3>

<p>VSTPlugin defines two custom event types, which makes it easy to use with <a href="./..\Classes/Pbind.html">Pbind</a>. Like most other event types, commands are scheduled as bundles with Server latency taken into account.<dl>
<dt><code>\vst_set</code><dd>sets one or more plugin parameters to the specified values; the interface is similar to <code>\set</code>.<table>
<tr><td><code>\vst</code><td>the VSTPluginController instance<tr><td><code>\params</code><td>an Array of parameter names and/or indices which will be looked up in the Event</table>

<p><textarea class='editor'>Pbind(
    \type, \vst_set,
    \vst, ~fx,
    \params, [1, \Mix], // look up parameter 1 and 'Mix'
    1, Pwhite(0.1, 0.9), // value for parameter 1
    \Mix, Pseq([0.1, 0.2, 0.5, 0.9], inf), // value for parameter 'Mix'
    \dur, Prand([0.25, 0.5, 1], inf)
)</textarea>

<p>If you omit the <code>\params</code> argument, the play method will automatically try to look up parameters by name:<textarea class='editor'>Pbind(
    \type, \vst_set,
    \vst, ~fx,
    \Mix, Pseq([0.1, 0.2, 0.5, 0.9], inf), // value for parameter 'Mix'
    \dur, Prand([0.25, 0.5, 1], inf)
)</textarea>

<p><div class='warning'><span class='warninglabel'>WARNING:</span> This can be very inefficient for plugins with a large number of parameters! It is always better to explicitly specify the parameters you need with the <code>\params</code> argument</div>
<p>See <a href="#Automation">Automation</a> for more examples.<dt><code>\vst_midi</code><dd>send MIDI messages; the interface is very similar to <code>\midi</code>.<table>
<tr><td><code>\vst</code><td>the VSTPluginController instance<tr><td><code>\midicmd</code><td>the MIDI method (see below)<tr><td><code>\chan</code><td>the MIDI channel; the default is 0<tr><td><code>\midinote</code><td>MIDI pitch for <code>\noteOn</code>, <code>\noteOff</code> and <code>\polyTouch</code><tr><td><code>\amp</code><td>amplitude (0.0 - 1.0) for <code>\noteOn</code> and <code>\noteOff</code><tr><td><code>\ctlNum</code><td>CC number for <code>\control</code><tr><td><code>\control</code><td>CC value for <code>\control</code><tr><td><code>\val</code><td>value argument for <code>\touch</code> and <code>\bend</code><tr><td><code>\polyTouch</code><td>touch value for <code>\polyTouch</code><tr><td><code>\progNum</code><td>program number for <code>\program</code><tr><td><code>\array</code><td>UInt8Array for <code>\sysex</code></table>

<p>The default value for <code>\midicmd</code> is <code>\noteOn</code>, with <code>\noteOff</code> commands being scheduled automatically. Other possible values are <code>\noteOff</code>, <code>\control</code>, <code>\bend</code>, <code>\touch</code>, <code>\polyTouch</code>, <code>\program</code>, <code>\allNotesOff</code> and <code>\sysex</code>. The commands correspond to the methods listed in <a href="./..\Classes/VSTPluginMIDIProxy.html">VSTPluginMIDIProxy</a> and <a href="./..\Classes/MIDIOut.html">MIDIOut</a>.
<p>See <a href="#VST%20Instruments">VST Instruments</a> for examples.</dl>
<div class='note'><span class='notelabel'>NOTE:</span> You can play Pbinds of type <code>\vst_midi</code> and <code>\vst_set</code> in parallel with <a href="./..\Classes/Ppar.html">Ppar</a>.</div><h3><a class='anchor' name='Realtime%20Safety'>Realtime Safety</a></h3>

<p>VSTPlugin tries its best to be as realtime safe as possible. Plugins are always opened/closed asynchronously in the NRT thread. Some methods, like <a href="#-reset">-reset</a> or <a href="#-readProgram">-readProgram</a>, offer two options via the <code>async</code> parameter:
<p><code>async: false</code> means that the plugin method is simply called on the RT thread. Depending on the plugin, this might be just fine - or block the Server. You have to test yourself.
<p><code>async: true</code> means that the plugin method is called on the NRT thread. The UGen is temporarily "suspended", so it won't accept other messages until the command has finished. Also, the plugin itself might be bypassed for a short time, but it will never block the Server!<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>VSTPluginController.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a>(<span class='argstr'>synth</span>, <span class='argstr'>id</span>, <span class='argstr'>synthDef</span>, <span class='argstr'>wait: -1</span>)</h3>
<div class='method'>
<p>Create a new VSTPluginController.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>synth<td class='argumentdesc'>
<p>the <a href="./..\Classes/Synth.html">Synth</a> containing the <a href="./..\Classes/VSTPlugin.html">VSTPlugin</a> you want to control.<tr><td class='argumentname'>id<td class='argumentdesc'>
<p>a symbol or number which uniquely identifies the <a href="./..\Classes/VSTPlugin.html">VSTPlugin</a> within the <a href="./..\Classes/SynthDef.html">SynthDef</a>.
<p>If this is <code>nil</code>, VSTPluginController will take the first instance it can find. This implies that you don't need an <em>id</em> if there's only a single VSTPlugin in the SynthDef.<tr><td class='argumentname'>synthDef<td class='argumentdesc'>
<p>the synth's <a href="./..\Classes/SynthDef.html">SynthDef</a>. This is only needed in case the SynthDef hasn't been added to the global <a href="./..\Classes/SynthDescLib.html">SynthDescLib</a>, e.g. with <a href="./..\Classes/SynthDef.html#-add">SynthDef: -add</a>. Otherwise it can be automatically deduced from the <em>synth</em> argument.<tr><td class='argumentname'>wait<td class='argumentdesc'>
<p>see <a href="#-wait">-wait</a>.</table><h4>Discussion:</h4>

<p>Initially, no VST plugin is loaded and the UGen is automatically bypassed (i.e. the input is just passed through).</div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-open' href='./../Overviews/Methods.html#open'>open</a>(<span class='argstr'>path</span>, <span class='argstr'>editor: false</span>, <span class='argstr'>verbose: false</span>, <span class='argstr'>action</span>, <span class='argstr'>threaded: false</span>)</h3>
<div class='method'>
<p>open a VST plugin.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>path<td class='argumentdesc'>
<p>the plugin key or file path.
<p>- Opening plugins by <strong>key</strong> requires that the plugin has already been probed (e.g. as a result of <a href="./..\Classes/VSTPlugin.html#*search">VSTPlugin: *search</a>).<textarea class='editor'>~fx.open("GChorus"); // assuming 'GChorus' is in the Server's plugin dictionary.
~fx.open("mda Delay.vst3"); // VST3 plugins always need a '.vst3' extensions</textarea>

<p>- Alternatively, you can use a <strong>file path</strong> (with or without extension). Relative paths are resolved to the standard VST directories (see <a href="./..\Classes/VSTPlugin.html#*search">VSTPlugin: *search</a>); this is done recursively, which means you don't necessarily have to specify any subfolders.<textarea class='editor'>// absolute file path:
~fx.open("C:/Program Files/VSTPlugins/GVST/GChorus");

// since C:/Program Files/VSTPlugins/ is one of the standard VST directories,
// the plugin can also be opened like this:
~fx.open("GVST/GChorus");
~fx.open("GChorus"); // even without subfolder</textarea>
<div class='note'><span class='notelabel'>NOTE:</span> This method only works for files which contain a single plugin (all VST 2.x plugins - except for shell plugins - and many VST 3 plugins).</div>
<p>- If the VSTPlugin UGen holds a plugin description (see <a href="./..\Classes/VSTPlugin.html#*ar">VSTPlugin: *ar</a>), the <code>path</code> argument can be deduced and therefor omitted.<textarea class='editor'>VSTPlugin.search;
(
SynthDef(\chorus, { arg bus=0;
    var plugin = VSTPlugin.plugins[\GChorus];
    ReplaceOut.ar(bus, VSTPlugin.ar(In.ar(bus, 2), 2, info: plugin));
}).add;
)
~fx = VSTPluginController(Synth(\chorus)).open; // will open 'GChorus'</textarea>
<tr><td class='argumentname'>editor<td class='argumentdesc'>
<p>request the VST plugin editor.<div class='note'><span class='notelabel'>NOTE:</span> On macOS this only works with SuperCollider 3.11 and above!</div><tr><td class='argumentname'>verbose<td class='argumentdesc'>
<p>post the plugin info to the console if loaded successfully.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to be called with <code>this</code> and a Boolean (success/fail).<tr><td class='argumentname'>threaded<td class='argumentdesc'>
<p>process the plugin in a seperate worker thread to utilize more CPU cores.<div class='note'><span class='notelabel'>NOTE:</span> This option is ignored for Supernova which already offers multiprocessing with ParGroup.</div>
<p><div class='note'><span class='notelabel'>NOTE:</span> Multiprocessing introduces a delay of 1 block!</div></table><h4>Discussion:</h4>

<p>This method is realtime-safe because the VST plugin is opened asynchronously (in the NRT thread).</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-openMsg' href='./../Overviews/Methods.html#openMsg'>openMsg</a>(<span class='argstr'>path</span>, <span class='argstr'>editor: false</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>path<td class='argumentdesc'>
<p>the plugin name/key or file path. Relative paths are resolved to the standard VST directories.
<p>If the VSTPlugin UGen holds a plugin description (see <a href="./..\Classes/VSTPlugin.html#*ar">VSTPlugin: *ar</a>), the <code>path</code> argument can be deduced and therefor ommitted.<tr><td class='argumentname'>editor<td class='argumentdesc'>
<p>request the VST editor.</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>the message for an <em>open</em> command (see <a href="#-open">-open</a>).</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-close' href='./../Overviews/Methods.html#close'>close</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-closeMsg' href='./../Overviews/Methods.html#closeMsg'>closeMsg</a></h3>
<div class='method'>
<p>close the current plugin (but don't free the Synth!). You can open another plugin later.<h4>Discussion:</h4>

<p>This will automatically bypass the plugin (i.e. the input is just passed through).
<p>Just like <a href="#-open">-open</a>, this method is realtime-safe.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-browse' href='./../Overviews/Methods.html#browse'>browse</a></h3>
<div class='method'>
<p>open the plugin browser dialog.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-editor' href='./../Overviews/Methods.html#editor'>editor</a>(<span class='argstr'>show: true</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-editorMsg' href='./../Overviews/Methods.html#editorMsg'>editorMsg</a>(<span class='argstr'>show: true</span>)</h3>
<div class='method'>
<p>shows/hide the VST editor window.<h4>Discussion:</h4>

<p>The plugin has to be opened with <em>editor</em> set to <code>true</code>.<div class='note'><span class='notelabel'>NOTE:</span> On macOS this only works on SuperCollider 3.11 and above!</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-gui' href='./../Overviews/Methods.html#gui'>gui</a>(<span class='argstr'>parent</span>, <span class='argstr'>bounds</span>, <span class='argstr'>params: true</span>)</h3>
<div class='method'>
<p>creates a generic Qt GUI (see <a href="./..\Classes/VSTPluginGui.html">VSTPluginGui</a>).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>parent<td class='argumentdesc'>
<p>the parent. If <code>nil</code>, the GUI is created in a new toplevel window.<tr><td class='argumentname'>bounds<td class='argumentdesc'>
<p>the bounds.<tr><td class='argumentname'>params<td class='argumentdesc'>
<p>show/hide parameters. Set to <code>false</code>, if you only need to show the preset manager!</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>a new <a href="./..\Classes/VSTPluginGui.html">VSTPluginGui</a> instance.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-info' href='./../Overviews/Methods.html#info'>info</a></h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>the (static) plugin description (see <a href="./..\Classes/VSTPluginDesc.html">VSTPluginDesc</a>).</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-loaded' href='./../Overviews/Methods.html#loaded'>loaded</a></h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>whether a plugin is currently loaded.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-reset' href='./../Overviews/Methods.html#reset'>reset</a>(<span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-resetMsg' href='./../Overviews/Methods.html#resetMsg'>resetMsg</a>(<span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>reset the plugin state.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>see <a href="#Realtime%20Safety">Realtime Safety</a>.</table><h4>Discussion:</h4>

<p>Generally, <em>reset</em> might not be realtime-safe, e.g. if it involves O(n) operations like clearing a large delay line.
<p>If this is a problem you can try to reset it asynchronously (in the non-realtime thread).<div class='warning'><span class='warninglabel'>WARNING:</span> Some plugins crash when being reset in the non-realtime thread, so use with care!</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-synth' href='./../Overviews/Methods.html#synth'>synth</a></h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>the <a href="./..\Classes/Synth.html">Synth</a> containing the currently controlled <a href="./..\Classes/VSTPlugin.html">VSTPlugin</a> instance.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-synthIndex' href='./../Overviews/Methods.html#synthIndex'>synthIndex</a></h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>the index of the <a href="./..\Classes/VSTPlugin.html">VSTPlugin</a> instance within the <a href="./..\Classes/Synth.html">Synth</a>.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-wait' href='./../Overviews/Methods.html#wait'>wait</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-wait' href='./../Overviews/Methods.html#wait'>wait</a> = value</h3>
<div class='method'>
<p>the wait time between OSC messages (in seconds).<h4>Discussion:</h4>

<p>-1 allows an OSC roundtrip between packets.
<p>0 is not safe with UDP, but is probably ok with TCP.
<p>Some methods may require lots of OSC messages (e.g. when changing programs, the UGen has to send the new state of all parameters). VSTPluginController waits for the given time after a certain number of bytes to avoid messages getting dropped. This is mostly relevant for UDP connections, especially for remote Servers, high network traffic and plugins with a large number of parameters.
<p>The wait time can be changed anytime.</div><h3><a class='anchor' name='Parameters'>Parameters</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-numParameters' href='./../Overviews/Methods.html#numParameters'>numParameters</a></h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>the number of parameters.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-set' href='./../Overviews/Methods.html#set'>set</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setMsg' href='./../Overviews/Methods.html#setMsg'>setMsg</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>Set plugin parameters.<h4>Discussion:</h4>

<p>This method expects pairs of parameter index/name and value. Each value should be either a number between 0.0 and 1.0 or a string/symbol.<div class='note'><span class='notelabel'>NOTE:</span> Some plugins don't support setting parameters by strings, others only allow it for certain parameters.</div><textarea class='editor'>// set parameter 3 to value 0.9:
~fx.set(3, 0.9);
// set parameter 'Mix' to 0.5:
~fx.set(\Mix, 0.5);
// set parameters 1 and 3:
~fx.set(1, 0.5, 3, 0.75);
// GChorus (GVST):
~fx.set(\Freq, "3.16"); // set frequency in Hz as string</textarea>

<p><div class='note'><span class='notelabel'>NOTE:</span> The parameter(s) will be automatically unmapped from any control bus, see <a href="#-map">-map</a>.</div>
<p>With <code>setMsg</code> you can schedule <em>sample accurate</em> parameter changes for plugins which support this (some, but not all VST3 plugins).</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setn' href='./../Overviews/Methods.html#setn'>setn</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setnMsg' href='./../Overviews/Methods.html#setnMsg'>setnMsg</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>set sequential ranges of parameters.<h4>Discussion:</h4>

<p>This method expects pairs of parameter index and Array of values (numbers or strings/symbols), see <a href="#-set">-set</a>.<textarea class='editor'>// this will set parameters 3, 4, 8, 9 and 10.
~fx.setn(3, [0.5, 0.75], 8, [0.1, "300", 0.3]);</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-map' href='./../Overviews/Methods.html#map'>map</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>map parameters to control or audio busses.<h4>Discussion:</h4>

<p>This methods expects pairs of parameter index/name and bus. In case of multi-channel busses the channels are mapped to a sequential range of parameters starting at the given index/name.
<p>The bus argument can be simply an integer referring to a <em>control</em> bus. If you want to map an audio bus, you have to explicitly pass an audio Bus object.
<p>Parameters are updated whenever the data in the bus changes.<div class='note'><span class='notelabel'>NOTE:</span> Only map to an audio bus if you need sample accurate automation and the plugin actually supports it (some, but not all VST3 plugins).</div>
<p><textarea class='editor'>~bus1 = Bus.control;
~bus2 = Bus.control(numChannels: 2);
~fx.map(\Mix, ~bus1, 5, ~bus2);
~bus1.set(0.5); // set parameter 'Mix'
~bus2.set(0.75, 0.9); // set parameters 5 and 6 (because of 2-channel control bus)

~bus3 = Bus.audio;
~fx.map(\Delay, ~bus3); // audio rate automation (assuming the 'Delay' parameter supports this)</textarea>

<p>Each parameter can only be mapped to one control bus channel at the time.<div class='note'><span class='notelabel'>NOTE:</span> setting a parameter with <a href="#-set">-set</a> or <a href="#-setn">-setn</a> will automatically unmap it from any control bus.</div><div class='note'><span class='notelabel'>NOTE:</span> <code>map</code> will override automation via UGen arguments.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-mapMsg' href='./../Overviews/Methods.html#mapMsg'>mapMsg</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>returns a <em>bundle</em> containing control and/or audio bus mapping messages. Takes the same arguments as <code>map</code>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-mapn' href='./../Overviews/Methods.html#mapn'>mapn</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-mapnMsg' href='./../Overviews/Methods.html#mapnMsg'>mapnMsg</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>map parameters to control busses. The arguments are triples of parameter index/name, control bus index and number of channels. See <a href="#map">map</a>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-mapan' href='./../Overviews/Methods.html#mapan'>mapan</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-mapanMsg' href='./../Overviews/Methods.html#mapanMsg'>mapanMsg</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>map parameters to audio busses. The arguments are triples of parameter index/name, audio bus index and number of channels. See <a href="#map">map</a>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-unmap' href='./../Overviews/Methods.html#unmap'>unmap</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-unmapMsg' href='./../Overviews/Methods.html#unmapMsg'>unmapMsg</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>Unmap parameters from a control bus.<h4>Discussion:</h4>

<p>Pass all the parameters you want to unmap. Calling the method without arguments will unmap all parameters.<textarea class='editor'>// unmap parameters 4, 5, and 7
~fx.unmap(4, 5, 7);</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-get' href='./../Overviews/Methods.html#get'>get</a>(<span class='argstr'>index</span>, <span class='argstr'>action</span>)</h3>
<div class='method'>
<p>get the current value of a plugin parameter.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>index<td class='argumentdesc'>
<p>the index/name of the parameter.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to be evaluated with the value passed as an argument.</table><h4>Discussion:</h4>
<textarea class='editor'>// get the value of parameter 4 and post it to the console:
~fx.get(4, {arg f: f.postln;});
// get the value of parameter 'Mix':
~fx.get(\Mix, {arg f: f.postln;});</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-getn' href='./../Overviews/Methods.html#getn'>getn</a>(<span class='argstr'>index: 0</span>, <span class='argstr'>count: -1</span>, <span class='argstr'>action</span>)</h3>
<div class='method'>
<p>get a sequential range of parameter values.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>index<td class='argumentdesc'>
<p>the starting index/name.<tr><td class='argumentname'>count<td class='argumentdesc'>
<p>the number of sequential parameter values. -1 will return all parameters starting from <em>index</em>.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action be evaluated with the values passed as an Array.</table><h4>Discussion:</h4>
<textarea class='editor'>// get the values of parameters 2, 3 an 4 and post them to console:
~fx.getn(2, 3, {arg v; v.postln;});

// get all parameter values:
~fx.getn(action: {arg v; v.postln;});</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-parameterAutomated' href='./../Overviews/Methods.html#parameterAutomated'>parameterAutomated</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-parameterAutomated' href='./../Overviews/Methods.html#parameterAutomated'>parameterAutomated</a> = value</h3>
<div class='method'>
<p>a <a href="./..\Classes/Function.html">Function</a> or <a href="./..\Classes/FunctionList.html">FunctionList</a> to be called when parameters are automated from the VST editor.<h4>Discussion:</h4>

<p>The action receives the parameter index and value. This can be helpful if you want to know the index of a parameter in the editor.<div class='note'><span class='notelabel'>NOTE:</span> Some plugins link parameters, so that changing one parameter will lead to several other parameters being "automated". In that case it is not possible to determine which parameter has been automated manually.</div></div><h3><a class='anchor' name='Preset%20Management'>Preset Management</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-numPrograms' href='./../Overviews/Methods.html#numPrograms'>numPrograms</a></h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>the number of available built-in plugin programs.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-program' href='./../Overviews/Methods.html#program'>program</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-program' href='./../Overviews/Methods.html#program'>program</a> = <span class='argstr'>number</span></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-programMsg' href='./../Overviews/Methods.html#programMsg'>programMsg</a>(<span class='argstr'>number</span>)</h3>
<div class='method'>
<p>select a built-in program or get the current program number.<h4>Discussion:</h4>

<p>use the setter to change between built-in programs.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-programName' href='./../Overviews/Methods.html#programName'>programName</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-programName' href='./../Overviews/Methods.html#programName'>programName</a> = <span class='argstr'>name</span></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-programNameMsg' href='./../Overviews/Methods.html#programNameMsg'>programNameMsg</a>(<span class='argstr'>name</span>)</h3>
<div class='method'>
<p>get/set the name of the current program (VST2 only).</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-readProgram' href='./../Overviews/Methods.html#readProgram'>readProgram</a>(<span class='argstr'>path</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-readBank' href='./../Overviews/Methods.html#readBank'>readBank</a>(<span class='argstr'>path</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-writeProgram' href='./../Overviews/Methods.html#writeProgram'>writeProgram</a>(<span class='argstr'>path</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-writeBank' href='./../Overviews/Methods.html#writeBank'>writeBank</a>(<span class='argstr'>path</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>read/write program/bank files.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>path<td class='argumentdesc'>
<p>an absolute file path.
<p>The file extension is arbitrary but it is good practice to use <em>.fxp</em> for VST2 program files, <em>.fxb</em> for VST2 bank files and <em>.vstpreset</em> for VST3 preset files.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to be called with <code>this</code> and a Boolean (success/fail).<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>where to execute the plugin method, see <a href="#Realtime%20Safety">Realtime Safety</a>.<div class='note'><span class='notelabel'>NOTE:</span> The file/buffer IO itself is always performed asynchronously!</div></table><h4>Discussion:</h4>

<p>The program and bank files are in a standard format which is recogized by every decent DAW or VST host. This means you can freely exchange presets between different applications!<div class='note'><span class='notelabel'>NOTE:</span> Preset banks are only supported by VST2 plugins</div>
<p>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-readProgramMsg' href='./../Overviews/Methods.html#readProgramMsg'>readProgramMsg</a>(<span class='argstr'>dest</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-readBankMsg' href='./../Overviews/Methods.html#readBankMsg'>readBankMsg</a>(<span class='argstr'>dest</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-writeProgramMsg' href='./../Overviews/Methods.html#writeProgramMsg'>writeProgramMsg</a>(<span class='argstr'>dest</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-writeBankMsg' href='./../Overviews/Methods.html#writeBankMsg'>writeBankMsg</a>(<span class='argstr'>dest</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>dest<td class='argumentdesc'>
<p>a) String: preset file to be read or written.
<p>b) <a href="./..\Classes/Buffer.html">Buffer</a> or bufnum: exchange program/bank data between a Client and a remote Server via a Buffer.
<p><code>read*Msg</code>: the Buffer should contain the preset data with each float representing a single byte; it has to be allocated and freed by the Client.
<p><code>write*Msg</code>: the Buffer should be initially empty. The UGen will fill the Buffer on the Server, the Client can then read the data and free the Buffer.<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>see above.</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>the message for reading/writing a program/bank file or exchanging program/bank data via a Buffer.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setProgramData' href='./../Overviews/Methods.html#setProgramData'>setProgramData</a>(<span class='argstr'>data</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setBankData' href='./../Overviews/Methods.html#setBankData'>setBankData</a>(<span class='argstr'>data</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>set the new program/bank state as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>data<td class='argumentdesc'>
<p>the raw plugin data.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to be called with <code>this</code> and a Boolean (success/fail).<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>where to execute the plugin method, see <a href="#Realtime%20Safety">Realtime Safety</a>.<div class='note'><span class='notelabel'>NOTE:</span> The data transfer itself is always performed asynchronously!</div></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-getProgramData' href='./../Overviews/Methods.html#getProgramData'>getProgramData</a>(<span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-getBankData' href='./../Overviews/Methods.html#getBankData'>getBankData</a>(<span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>get the current program/bank state as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to pass the data - or <code>nil</code> if the method failed.<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>see above.</table><h4>Discussion:</h4>

<p>Internally, the program data is exchanged via temp files.<div class='note'><span class='notelabel'>NOTE:</span> This only works with a local Server!</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendProgramData' href='./../Overviews/Methods.html#sendProgramData'>sendProgramData</a>(<span class='argstr'>data</span>, <span class='argstr'>wait</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendBankData' href='./../Overviews/Methods.html#sendBankData'>sendBankData</a>(<span class='argstr'>data</span>, <span class='argstr'>wait</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>send the new program/bank state as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>data<td class='argumentdesc'>
<p>the raw plugin data.<tr><td class='argumentname'>wait<td class='argumentdesc'>
<p>temporarily overwrites <a href="#-wait">-wait</a> if not <code>nil</code>.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to be called with <code>this</code> and a Boolean (success/fail).<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>where to execute the plugin method, see <a href="#Realtime%20Safety">Realtime Safety</a>.<div class='note'><span class='notelabel'>NOTE:</span> The data transfer itself is always performed asynchronously!</div></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-receiveProgramData' href='./../Overviews/Methods.html#receiveProgramData'>receiveProgramData</a>(<span class='argstr'>wait</span>, <span class='argstr'>timeout: 3</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-receiveBankData' href='./../Overviews/Methods.html#receiveBankData'>receiveBankData</a>(<span class='argstr'>wait</span>, <span class='argstr'>timeout: 3</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>receive the current program/bank state as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>wait<td class='argumentdesc'>
<p>temporarily overwrites <a href="#-wait">-wait</a> if not <code>nil</code>.<tr><td class='argumentname'>timeout<td class='argumentdesc'>
<p>the number of seconds to wait before giving up.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action to pass the data.<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>see above.</table><h4>Discussion:</h4>

<p>Contrary to <a href="#-setProgramData">-setProgramData</a>, <a href="#-getProgramData">-getProgramData</a> etc., the methods above also work with remote Servers because the data is streamed via OSC messages. This means it is not 100% reliable when using UDP.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-loadPreset' href='./../Overviews/Methods.html#loadPreset'>loadPreset</a>(<span class='argstr'>preset</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-savePreset' href='./../Overviews/Methods.html#savePreset'>savePreset</a>(<span class='argstr'>preset</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>load/save VST presets.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>preset<td class='argumentdesc'>
<p>the preset name or index (see <a href="./..\Classes/VSTPluginDesc.html#-presets">VSTPluginDesc: -presets</a>). You can create a new preset by passing a non-existing preset name to <code>savePreset</code>.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>an action which is called with <code>this</code> and a Boolean (success/fail).<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>where to execute the plugin method, see <a href="#Realtime%20Safety">Realtime Safety</a>.<div class='note'><span class='notelabel'>NOTE:</span> The file/buffer IO itself is always performed asynchronously!</div></table><h4>Discussion:</h4>

<p>These methods use pre-defined locations on the file system, so presets can be simply referred to by name or index (see <a href="./..\Classes/VSTPluginDesc.html#-presets">VSTPluginDesc: -presets</a>).<div class='note'><span class='notelabel'>NOTE:</span> This only works with local Servers (for now)!</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-deletePreset' href='./../Overviews/Methods.html#deletePreset'>deletePreset</a>(<span class='argstr'>preset</span>)</h3>
<div class='method'>
<p>delete a VST preset.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>preset<td class='argumentdesc'>
<p>the preset name or index.</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-renamePreset' href='./../Overviews/Methods.html#renamePreset'>renamePreset</a>(<span class='argstr'>preset</span>, <span class='argstr'>name</span>)</h3>
<div class='method'>
<p>delete a VST preset.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>preset<td class='argumentdesc'>
<p>the old preset name or index<tr><td class='argumentname'>name<td class='argumentdesc'>
<p>the new preset name.</table></div><h3><a class='anchor' name='MIDI'>MIDI</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-midi' href='./../Overviews/Methods.html#midi'>midi</a></h3>
<div class='method'>
<p>send MIDI messages to the plugin via a proxy class.<h4>Returns:</h4>
<div class='returnvalue'>
<p>an instance of <a href="./..\Classes/VSTPluginMIDIProxy.html">VSTPluginMIDIProxy</a>.</div><h4>Discussion:</h4>

<p><a href="./..\Classes/VSTPluginMIDIProxy.html">VSTPluginMIDIProxy</a> mimicks the interface of <a href="./..\Classes/MIDIOut.html">MIDIOut</a> and can be used interchangeably. This is very useful in conjunction with <a href="./..\Classes/Pbind.html">Pbind</a>s of event type <code>\midi</code>.<div class='note'><span class='notelabel'>NOTE:</span> MIDI pitches can be Floats! The fractional part is converted to cents and passed as the <code>detune</code> argument to <a href="#-sendMidi">-sendMidi</a>. This is not part of the MIDI standard and not all VST instruments actually support it!</div>
<p>All methods have a corresponding <code>*Msg</code> version which returns raw OSC messages; they can be scheduled sample accurately when sent as bundles!</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendMidi' href='./../Overviews/Methods.html#sendMidi'>sendMidi</a>(<span class='argstr'>status</span>, <span class='argstr'>data1: 0</span>, <span class='argstr'>data2: 0</span>, <span class='argstr'>detune</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendMidiMsg' href='./../Overviews/Methods.html#sendMidiMsg'>sendMidiMsg</a>(<span class='argstr'>status</span>, <span class='argstr'>data1: 0</span>, <span class='argstr'>data2: 0</span>, <span class='argstr'>detune</span>)</h3>
<div class='method'>
<p>send a raw MIDI message with 2-3 bytes (status, data1, data2) and an optional detune argument in cent (not supported by all VST instruments!). MIDI messages can be scheduled sample accurately when sent as bundles!</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendSysex' href='./../Overviews/Methods.html#sendSysex'>sendSysex</a>(<span class='argstr'>msg</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendSysexMsg' href='./../Overviews/Methods.html#sendSysexMsg'>sendSysexMsg</a>(<span class='argstr'>msg</span>)</h3>
<div class='method'>
<p>send a system exclusive message as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-midiReceived' href='./../Overviews/Methods.html#midiReceived'>midiReceived</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-midiReceived' href='./../Overviews/Methods.html#midiReceived'>midiReceived</a> = value</h3>
<div class='method'>
<p>a <a href="./..\Classes/Function.html">Function</a> or <a href="./..\Classes/FunctionList.html">FunctionList</a> to be called when receiving MIDI messages from the plugin.<h4>Discussion:</h4>

<p>The 3 bytes of the MIDI message are passed as invidual arguments:<textarea class='editor'>~fx.midiReceived = {arg ...msg; "got MIDI message %".format(msg)};</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sysexReceived' href='./../Overviews/Methods.html#sysexReceived'>sysexReceived</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sysexReceived' href='./../Overviews/Methods.html#sysexReceived'>sysexReceived</a> = value</h3>
<div class='method'>
<p>a <a href="./..\Classes/Function.html">Function</a> or <a href="./..\Classes/FunctionList.html">FunctionList</a> to be called when receiving SysEx messages from the plugin.<h4>Discussion:</h4>

<p>The SysEx data is passed to the action as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.</div><h3><a class='anchor' name='Transport'>Transport</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setPlaying' href='./../Overviews/Methods.html#setPlaying'>setPlaying</a>(<span class='argstr'>b</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setPlayingMsg' href='./../Overviews/Methods.html#setPlayingMsg'>setPlayingMsg</a>(<span class='argstr'>b</span>)</h3>
<div class='method'>
<p>set the transport playing state to true or false. Only necessary for VST plugins which do some kind of sequencing.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setTempo' href='./../Overviews/Methods.html#setTempo'>setTempo</a>(<span class='argstr'>bpm: 120</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setTempoMsg' href='./../Overviews/Methods.html#setTempoMsg'>setTempoMsg</a>(<span class='argstr'>bpm: 120</span>)</h3>
<div class='method'>
<p>set the tempo in BPM (beats per minute).</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setTimeSignature' href='./../Overviews/Methods.html#setTimeSignature'>setTimeSignature</a>(<span class='argstr'>num: 4</span>, <span class='argstr'>denom: 4</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setTimeSignatureMsg' href='./../Overviews/Methods.html#setTimeSignatureMsg'>setTimeSignatureMsg</a>(<span class='argstr'>num: 4</span>, <span class='argstr'>denom: 4</span>)</h3>
<div class='method'>
<p>set the time signature, e.g. 3/4 -&gt; num = 3, denom = 4.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setTransportPos' href='./../Overviews/Methods.html#setTransportPos'>setTransportPos</a>(<span class='argstr'>pos</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setTransportPosMsg' href='./../Overviews/Methods.html#setTransportPosMsg'>setTransportPosMsg</a>(<span class='argstr'>pos</span>)</h3>
<div class='method'>
<p>set the current transport position (in quarter notes).</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-getTransportPos' href='./../Overviews/Methods.html#getTransportPos'>getTransportPos</a>(<span class='argstr'>action</span>)</h3>
<div class='method'>
<p>get the current transport position (in quarter notes).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>will be called with current transport position.</table></div><h3><a class='anchor' name='VST2%20only'>VST2 only</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-canDo' href='./../Overviews/Methods.html#canDo'>canDo</a>(<span class='argstr'>what</span>, <span class='argstr'>action</span>)</h3>
<div class='method'>
<p>query the plugin for special capabilities.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>what<td class='argumentdesc'>
<p>a string describing the capability. Some of these are documented in the VST SDK, but others are not.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>will be called with an Integer result.<table>
<tr><td>1<td>yes<tr><td>-1<td>no<tr><td>0<td>don't know</table>
</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-vendorMethod' href='./../Overviews/Methods.html#vendorMethod'>vendorMethod</a>(<span class='argstr'>index: 0</span>, <span class='argstr'>value: 0</span>, <span class='argstr'>ptr</span>, <span class='argstr'>opt: 0.0</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-vendorMethodMsg' href='./../Overviews/Methods.html#vendorMethodMsg'>vendorMethodMsg</a>(<span class='argstr'>index: 0</span>, <span class='argstr'>value: 0</span>, <span class='argstr'>ptr</span>, <span class='argstr'>opt: 0.0</span>, <span class='argstr'>action</span>, <span class='argstr'>async: false</span>)</h3>
<div class='method'>
<p>access special functionality of a plugin which is not available via the standard parameter interface. Generally, you have to know what you're doing. Check the documentation of the plugin to see what data it expects<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>index<td class='argumentdesc'>
<p>an Integer.<tr><td class='argumentname'>value<td class='argumentdesc'>
<p>an Integer.<tr><td class='argumentname'>ptr<td class='argumentdesc'>
<p>some arbitrary data as an <a href="./..\Classes/Int8Array.html">Int8Array</a>.<tr><td class='argumentname'>opt<td class='argumentdesc'>
<p>a Float.<tr><td class='argumentname'>action<td class='argumentdesc'>
<p>will be called with an Integer result. The meaning depends on the VST plugin.<tr><td class='argumentname'>async<td class='argumentdesc'>
<p>whether the method call should be executed in the NRT thread (true) or in the RT thread (false), see <a href="#Realtime%20Safety">Realtime Safety</a>.</table></div><h3><a class='anchor' name='Extensions'>Extensions</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-iemPluginOSC' href='./../Overviews/Methods.html#iemPluginOSC'>iemPluginOSC</a>( <span class='argstr'>... msg</span>)</h3>
<div class='extmethod'>From extension in <a href='file:///C:/Users/Christof/AppData/Local/SuperCollider/Extensions/IEMPluginOSC/extVSTPluginController_IEM.sc'>C:\Users\Christof\AppData\Local\SuperCollider\Extensions\IEMPluginOSC\extVSTPluginController_IEM.sc</a></div>
<div class='method'>
<p>control IEM plug-ins via the OSC interface (<a href="https://plugins.iem.at/docs/osc).">https://plugins.iem.at/docs/osc).</a><h4>Discussion:</h4>

<p>OSC messages are directly passed to the plug-in without an actual UDP socket connection. (This means you <em>don't</em> have to enable the OSC Receiver.)
<p>Some commands, e.g. loading a configuration file for SimpleDecoder (<code>/SimpleDecoder/loadFile</code>), are not part of the VST parameter interface.  This method makes it possible to execute such commands without the VST editor, so the plug-in can be used in a non-GUI environment.<textarea class='editor'>// the following wouldn't be possible without the VST editor:
fx1~.open("SimpleDecoder");
fx1~.iemPluginOSC("/SimpleDecoder/loadFile", "my_config.json");

// it also makes other commands more convenient:
fx2~.open("StereoEncoder");
fx2~.iemPluginOSC("/StereoEncoder/azimuth", 90);
fx2~.iemPluginOSC("/StereoEncoder/elevation", 45);</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-iemPluginOSCMsg' href='./../Overviews/Methods.html#iemPluginOSCMsg'>iemPluginOSCMsg</a>( <span class='argstr'>... msg</span>)</h3>
<div class='extmethod'>From extension in <a href='file:///C:/Users/Christof/AppData/Local/SuperCollider/Extensions/IEMPluginOSC/extVSTPluginController_IEM.sc'>C:\Users\Christof\AppData\Local\SuperCollider\Extensions\IEMPluginOSC\extVSTPluginController_IEM.sc</a></div>
<div class='method'>
<p><h4>Returns:</h4>
<div class='returnvalue'>
<p>the message for a <em>iemPluginOSC</em> command.</div><h4>Discussion:</h4>

<p>This is especially useful for controlling IEM plug-ins in NRT synthesis.</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented%20instance%20methods'>Undocumented instance methods</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-addDependant' href='./../Overviews/Methods.html#addDependant'>addDependant</a>(<span class='argstr'>dependant</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-makeMsg' href='./../Overviews/Methods.html#makeMsg'>makeMsg</a>(<span class='argstr'>cmd</span> <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-programNames' href='./../Overviews/Methods.html#programNames'>programNames</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-sendMsg' href='./../Overviews/Methods.html#sendMsg'>sendMsg</a>(<span class='argstr'>cmd</span> <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-update' href='./../Overviews/Methods.html#update'>update</a>(<span class='argstr'>who</span>, <span class='argstr'>what</span> <span class='argstr'>... args</span>)</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>

<p>The following code is needed for most examples:<textarea class='editor'>(
// a simple stereo insert FX which reads from an audio bus
// and replaces the content with the processed output:
SynthDef.new(\insert, {arg bus;
    ReplaceOut.ar(bus, VSTPlugin.ar(In.ar(bus, 2), 2));
}).add;

// load sound file
~buf = Buffer.read(s, Platform.resourceDir +/+ "sounds/a11wlk01.wav");
// soundfile player
SynthDef(\test, {arg out = 0;
    Out.ar(out,
        PlayBuf.ar(1, ~buf, BufRateScale.kr(~buf), loop: 1).dup * 0.5;
    )
}).add;
)</textarea>
<h3><a class='anchor' name='Serial%20FX%20chains'>Serial FX chains</a></h3>

<p>How to build a serial FX chain on an audio bus:<textarea class='editor'>(
// allocate an FX bus
~fxBus = Bus.audio(s, 2);
// play test signal on FX bus
~test = Synth(\test, [\out, ~fxBus]);
// send FX bus to output
SynthDef(\output, {arg in = 0, out = 0;
    Out.ar(out, In.ar(in, 2))
}).play(~test, [\in, ~fxBus, \out, 0], addAction: \addAfter);
)

// add an insert FX to the bus (after the test signal)
~fx1 = VSTPluginController(Synth(\insert, [\bus, ~fxBus], ~test, addAction: \addAfter));
// open a plugin from the GUI and play with the parameters
~fx1.gui;

// add another insert FX (after '~fx1'):
~fx2 = VSTPluginController(Synth(\insert, [\bus, ~fxBus], ~fx1.synth, addAction: \addAfter));
// open plugin
~fx2.gui;

// change the FX order dynamically, e.g. move '~fx2' before '~fx1':
~fx2.synth.moveBefore(~fx1.synth);

~fx1.synth.free; // remove from FX chain
~fx2.synth.free; // remove from FX chain</textarea>

<p>You can also create fixed FX chains by using several VSTPlugins inside a SynthDef:<textarea class='editor'>(
// an insert FX with two plugins hardcoded in series:
SynthDef.new(\insert2, {arg bus, bypass1=0, bypass2=0;
    var sig = In.ar(bus, 2);
    sig = VSTPlugin.ar(sig, 2, bypass1, id: \fx1);
    sig = VSTPlugin.ar(sig, 2, bypass2, id: \fx2);
    ReplaceOut.ar(bus, sig);
}).add;
)

(
// insert into the FX bus
~synth = Synth(\insert2, [\bus, ~fxBus], ~test, addAction: \addAfter);
// get handles to the individual VST plugins:
~fx1 = VSTPluginController(~synth, \fx1);
~fx2 = VSTPluginController(~synth, \fx2);
)

// open plugins
~fx1.browse;
~fx2.browse;

// bypass FX
~synth.set(\bypass1, 1);
~synth.set(\bypass2, 1);

~synth.free; // remove FX</textarea>
<h3><a class='anchor' name='Master%20FX%20section'>Master FX section</a></h3>

<p>This is how you would create a simple master FX section:<textarea class='editor'>// Cmd + .
// add a group *after* the default group
~fxGroup = Group.after(1);
// add two stereo insert effects to the FX group (in series)
~fx1 = VSTPluginController(Synth(\insert, [\bus, 0], ~fxGroup, addAction: \addToTail));
~fx2 = VSTPluginController(Synth(\insert, [\bus, 0], ~fxGroup, addAction: \addToTail));

// open plugins
~fx1.browse;
~fx2.browse;

// play test sound
Synth(\test, [\out, 0]);</textarea>
<h3><a class='anchor' name='Automation'>Automation</a></h3>

<p>Automate parameters via control busses<div class='note'><span class='notelabel'>NOTE:</span> Parameter automation will <em>not</em> be visible in the Qt GUI (due to performance reasons)</div><textarea class='editor'>// Cmd + .
// play test signal
~test = Synth(\test, [\out, 0]);

// insert FX (after ~test)
~fx = VSTPluginController(Synth.new(\insert, [\bus, 0], ~test, addAction: \addAfter));
// open plugin
~fx.browse;
// create control bus
~ctl = Bus.control;
// create an LFO
~lfo = {Out.kr(~ctl, SinOsc.kr(0.25, 0, 0.5, 0.5))}.play;
// modulate the first parameter of ~fx by mapping it to ~ctl
~fx.map(0, ~ctl); // (don't move the slider of the mapped parameter in the Qt GUI or you will unmap it!)
// unmap it
~fx.unmap(0);

~fx.synth.free; // remove FX
~lfo.free;</textarea>

<p>Automate parameters inside the SynthDef:<textarea class='editor'>(
SynthDef.new(\mod, {arg bus, rate=0.25, bypass=0;
    var lfo, sig;
    lfo = SinOsc.kr(rate, 0, 0.5, 0.5);
    // parameter 0 will be modulated by a SinOsc
    sig = VSTPlugin.ar(In.ar(bus, 2), 2, bypass, params: [0, lfo]);
    ReplaceOut.ar(bus, sig);
}).add;
)

~fx = VSTPluginController(Synth.new(\mod, [\bus, 0], ~test, addAction: \addAfter));
// open plugin
~fx.browse;

~fx.synth.set(\rate, 0.9); // change modulation rate
~fx.synth.set(\bypass, 1); // bypass
~fx.synth.free; // release FX</textarea>

<p>Automate parameters with a Pbind of type <code>\vst_set</code>:<textarea class='editor'>~fx = VSTPluginController(Synth.new(\insert, [\bus, 0], ~test, addAction: \addAfter));
// open plugin (the example uses 'GChorus' from GVST plugins)
~fx.open("GChorus");

(
p = Pbind(
    \type, \vst_set,
    \vst, ~fx, // the VSTPluginController instance
    \params, [1, 3, \Mix], // parameter indices/names (looked up below)
    1, Pwhite(0.1, 0.9), // value for parameter 1
    3, Pwhite(0.3, 0.7), // value for parameter 3
    \Mix, Pseq([0.1, 0.2, 0.5, 0.9], inf), // value for parameter 'Mix'
    \dur, Prand([0.25, 0.5, 1], inf)
).play;
)

p.stop;</textarea>
<h3><a class='anchor' name='VST%20Instruments'>VST Instruments</a></h3>

<p>You can easily play VST instruments with a <a href="./..\Classes/Pbind.html">Pbind</a> of event type <code>\vst_midi</code>:<textarea class='editor'>// Cmd + .
(
SynthDef.new(\vsti, {arg out = 0;
    // VST instruments usually don't have inputs
    Out.ar(out, VSTPlugin.ar(nil, 2));
}).add;
)

// create Synth with VST instrument
~vsti = VSTPluginController(Synth(\vsti));
// open plugin
~vsti.browse;

// play the instrument with a \vst_midi Pbind
(
p = Pbind(
    \type, \vst_midi,
    \vst, ~vsti, // the VSTPluginController instance
    \midicmd, \noteOn, // the default, can be omitted
    \chan, 0, // MIDI channel (default: 0)
    \midinote, Pseq(#[0, 2, 4, 7], inf) + Pwhite(-12, 12).stutter(Pwhite(4, 16)) + 60,
    \dur, Prand(#[0.125, 0.25, 0.5], inf),
    \legato, Pexprand(0.5, 1.0, inf),
    \amp, Pexprand(0.5, 1.0, inf)
).play(quant: 1);
)

// change programs
~vsti.program_(1);

p.stop;</textarea>
<h3><a class='anchor' name='Non-Realtime%20Synthesis'>Non-Realtime Synthesis</a></h3>

<p>Many methods of VSTPluginController have a corresponding <em>*Msg</em> version returning a Server message which can be added to a <a href="./..\Classes/Score.html">Score</a> for non-realtime synthesis.<div class='note'><span class='notelabel'>NOTE:</span> Using these messages in a realtime context is not recommended because the Client state may not always be updated correctly.</div>
<p>The following code snippet will create a short soundfile with two random melodies played by VST instruments; it can be executed in a single block.<textarea class='editor'>(
// SynthDef for playing the VSTi
SynthDef.new(\vsti, { arg out;
    Out.ar(out, VSTPlugin.ar(nil,  numOut: 2));
}).store;

// custom event type for sending MIDI messages
Event.addEventType(\vsti, {
    var pitch = ~midinote.value;
    var velo = (~amp.value * 127).clip(0, 127).asInteger;
    var delta = ~sustain.value;
    // 'schedBundle' is the most low level method in the default Event type;
    // it is overwritten in Pbind-asScore so that bundles are added to the
    // Score (instead of sending them to the Server).
    ~schedBundle.value(0, 0, nil, ~vsti.midi.noteOnMsg(0, pitch, velo));
    ~schedBundle.value(delta, 0, nil, ~vsti.midi.noteOffMsg(0, pitch, velo));
});

// helper function for recording a Pbind to a Score
~render = { arg score, vsti, pbind, start, dur;
    var list = pbind.asScore(dur, start, (vsti: vsti)).score;
    score.score = score.score.addAll(list[1..(list.size-1)]); // we have to remove first and last bundle!
};

// 1) create the synths and controllers in the language:

~fx1 = VSTPluginController(Synth.basicNew(\vsti));
~fx2 = VSTPluginController(Synth.basicNew(\vsti));

// 2) create the score:

~score = Score.new;

~score.add([0.0, VSTPlugin.searchMsg(verbose: true)]); // search for plugins in default search paths
// ~score.add([0.0, VSTPlugin.searchMsg(["/my/plugin/directory"], useDefault: false, verbose: true)]); // use custom search path

// create the synths:
~score.add([0.0, ~fx1.synth.newMsg]);
~score.add([0.0, ~fx2.synth.newMsg]);

// load VSTi plugins (a little bit after creating the synth!)
~score.add([0.01, ~fx1.openMsg("Dexed")]);
~score.add([0.01, ~fx2.openMsg("Dexed")]);

// choose FX programs
~score.add([0.01, ~fx1.programMsg(0)]);
~score.add([0.01, ~fx2.programMsg(1)]);

// make a random melody
~melody = Pbind(
    \type, \vsti,
    \dur, Prand(#[0.125, 0.25, 0.5, 1], inf),
    \legato, 1,
    \amp, Pexprand(0.5, 1.0, inf),
    \midinote, Pwhite(48, 72, inf)
);

~render.(~score, ~fx1, ~melody, 1, 8); // render 8 beats of the first voice, starting at beat 1
~render.(~score, ~fx2, ~melody, 4, 7); // render 7 beats of the second voice, starting at beat 4

// end
~score.sort; // important!
~score.add([~score.endTime + 1, [0]]);

// 3) render stereo aiff file

~score.recordNRT("~/nrt_test".standardizePath, "~/nrt_test.aiff".standardizePath,
    options: ServerOptions.new.numOutputBusChannels_(2));

// 4) save the Score to a file

~score.saveToFile("~/nrt_test.txt".standardizePath);
)</textarea>

<p><div class='doclink'>helpfile source: <a href='file:///C:/Users/Christof/AppData/Local/SuperCollider/Extensions/VSTPlugin/HelpSource/Classes/VSTPluginController.schelp'>C:\Users\Christof\AppData\Local\SuperCollider\Extensions\VSTPlugin\HelpSource\Classes\VSTPluginController.schelp</a><br>link::Classes/VSTPluginController::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>